!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Presenta=t()}(this,(function(){"use strict";function e(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}e(':root{--fontHeading:Georgia,"Times New Roman",Times,serif;--fontText:"Trebuchet MS","Lucida Sans Unicode","Lucida Grande","Lucida Sans",Arial,sans-serif;--colorBack:#fff;--colorFore:#000;--colorAccent:#444;--colorAlt:#ddd;--blockWeight:1;--blockPadding:0;--blockOpacity:1;--blockBlend:unset;--scenePadding:0;--sceneBackColor:none}.presenta *{box-sizing:border-box}.presenta{position:relative;--presenta-pw:960;--presenta-w:960px;--presenta-h:540px;--presenta-vp:960;--presenta-fz:1;--presenta-p:calc(var(--presenta-pw)/var(--presenta-vp))}');var t="style_arrows__2J_-T",n="style_inner__1f-jA",o="style_left__199CL",i="style_right__2Bn_p",r="style_vertical__2l0YR",s="style_ui__1jWCU",a="style_hide__4RZI1";e(":root{--arrowsOpacity:.5;--arrowsVerticalPosition:center;--arrowsHorizontalPosition:space-between;--arrowsPadding:10px}.style_arrows__2J_-T{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100;transition:opacity .35s}.style_inner__1f-jA{width:100%;height:100%;display:flex;justify-content:var(--arrowsHorizontalPosition);color:var(--colorFore)}.style_direction__3lnqi .style_inner__1f-jA{flex-direction:column}.style_left__199CL,.style_right__2Bn_p{height:100%;display:flex;align-items:var(--arrowsVerticalPosition);justify-content:center;cursor:pointer;padding:var(--arrowsPadding);pointer-events:all}.style_vertical__2l0YR .style_left__199CL,.style_vertical__2l0YR .style_right__2Bn_p{height:unset}.style_ui__1jWCU{width:24px;height:24px;transition:background-color .3s ease-in-out;pointer-events:none}.style_ui__1jWCU circle{stroke:none;fill:var(--colorBack);opacity:var(--arrowsOpacity)}.style_hide__4RZI1{opacity:0}");var l=["containerPaddingTop","containerPaddingLeft","containerPaddingRight","containerPaddingBottom","colorBack","colorFore","colorAccent","colorAlt","fontText","fontHeading","scenePadding","sceneBackColor","blockPadding","blockWeight","blockOpacity","blockBlend"];var d=["transition","colors","fonts","layout","colorVar","blockVar","sceneVar"];var c={select:e=>"string"==typeof e?document.querySelector(e):e,props:(e,t)=>{l.forEach(n=>{if(t[n]){const o=t[n];e.style.setProperty("--"+n,o)}})},addProp:e=>{Array.isArray(e)?e.forEach(e=>{-1===l.indexOf(e)&&l.push(e)}):-1===l.indexOf(e)&&l.push(e)},globs:(e,t)=>{d.forEach(n=>{if(t[n]){const o=t[n];e.classList.add(`${n}__${o}`)}})},addGlob:e=>{Array.isArray(e)?e.forEach(e=>{-1===d.indexOf(e)&&d.push(e)}):-1===d.indexOf(e)&&d.push(e)},uid:e=>"uid"+JSON.stringify(e).split("").reduce((e,t)=>(e=(e<<5)-e+t.charCodeAt(0))&e,0),div:e=>(new DOMParser).parseFromString(e,"text/html").body.childNodes[0],fit:(e,t,n)=>{const o=getComputedStyle(e),i=+o.width.split("px")[0],r=+o.height.split("px")[0];let s=t.aspect;if(t.adapt){s=i/r}n.style.setProperty("--presenta-h",parseInt(960/s)+"px");const a=960/s,l=96e3/i,d=100*a/r,c=Math.max(l,d);let _="landscape";960<a&&(_="portrait"),n.classList.add(_),t._orientation=_,n.style.setProperty("--presenta-fz",1/(100/c))},event:(e,t)=>new CustomEvent(e,{bubbles:!0,detail:t}),io:{}};c.addProp(["arrowsOpacity","arrowsVerticalPosition","arrowsHorizontalPosition","arrowsPadding"]);var _="style_black__3Nszx";e(".style_black__3Nszx{width:100%;height:100%;position:absolute;top:0;left:0;background-color:#000;opacity:0;pointer-events:none;transition:opacity .5s cubic-bezier(.8,.2,.2,.8);z-index:999999}");const p=[],u=function(e,t,n,o){};u.run=e=>new Promise((t,n)=>{let o=0,i=0;e.scenes.forEach(e=>{e.blocks.forEach(e=>{const n=p.find(t=>t.type===e.type);if(n){const r=(e,n)=>{setTimeout(()=>{const r=document.createElement("link");r.href=e,r.rel="preload",r.as=n,document.head.appendChild(r),i++,i===o&&t()},o)};o++,r(e[n.field],n.as)}})}),0===o&&t()});c.io.addPreload=e=>{p.push(e)};var h="style_progressbar__37EFM",g="style_bar__3nLkk";e(":root{--progressbarHeight:5px;--progressbarBottom:initial}.style_progressbar__37EFM{--progressbarColor:var(--colorFore);width:100%;height:100%;pointer-events:none}.style_bar__3nLkk{width:0;height:var(--progressbarHeight);position:absolute;bottom:var(--progressbarBottom);left:0;background-color:var(--progressbarColor);transition:width .5s cubic-bezier(.8,.2,.2,.8)}"),c.addProp(["progressbarHeight","progressbarBottom","progressbarColor"]);e(".pagenumPosition__tl{--pagenumFlexAlign:flex-start;--pagenumFlexJustify:flex-start}.pagenumPosition__tc{--pagenumFlexAlign:flex-start;--pagenumFlexJustify:center}.pagenumPosition__tr{--pagenumFlexAlign:flex-start;--pagenumFlexJustify:flex-end}.pagenumPosition__cl{--pagenumFlexAlign:center;--pagenumFlexJustify:flex-start}.pagenumPosition__cc{--pagenumFlexAlign:center;--pagenumFlexJustify:center}.pagenumPosition__cr{--pagenumFlexAlign:center;--pagenumFlexJustify:flex-end}.pagenumPosition__bl{--pagenumFlexAlign:flex-end;--pagenumFlexJustify:flex-start}.pagenumPosition__bc{--pagenumFlexAlign:flex-end;--pagenumFlexJustify:center}.pagenumPosition__br{--pagenumFlexAlign:flex-end;--pagenumFlexJustify:flex-end}");var y="style_pagenum__1OmQh",f="style_inner__1w_O1",x="style_content__3u2tr";e(":root{--pagenumTextAlign:right;--pagenumPadding:5px;--pagenumFontSize:10px;--pagenumBackColor:none;--pagenumFont:var(--fontText);--pagenumFlexAlign:flex-end;--pagenumFlexJustify:flex-end}.style_pagenum__1OmQh{width:100%;height:100%;position:absolute;top:0;left:0;padding:var(--containerPaddingTop) var(--containerPaddingRight) var(--containerPaddingBottom) var(--containerPaddingLeft);pointer-events:none}.style_inner__1w_O1{width:100%;height:100%;padding:var(--pagenumPadding);display:flex;align-items:var(--pagenumFlexAlign);justify-content:var(--pagenumFlexJustify)}.style_content__3u2tr{text-align:var(--pagenumTextAlign);padding:var(--pagenumInnerPadding);font-size:var(--pagenumFontSize);color:var(--pagenumColor);font-family:var(--pagenumFont);background-color:var(--pagenumBackColor);border:var(--pagenumBorder);border-radius:var(--pagenumBorderRadius);transition:all .3s ease-in-out}"),c.addProp(["pagenumTextAlign","pagenumPadding","pagenumInnerPadding","pagenumFontSize","pagenumFont","pagenumBackColor","pagenumColor","pagenumBorder","pagenumBorderRadius","pagenumFlexAlign","pagenumFlexJustify"]),c.addGlob(["pagenumPosition"]);var v="style_limitswitch__3g8Lq",m="style_signalSet__GRA42",b="style_signalOut__2qd5k";e(".style_limitswitch__3g8Lq{pointer-events:none;opacity:0;background-color:var(--colorAccent);width:100%;height:100%;position:absolute;top:0;left:0}.style_signalSet__GRA42{opacity:.75}.style_signalOut__2qd5k{transition:opacity .35s ease-out;opacity:0}");var w="style_sync__2HAFR";e(".style_sync__2HAFR{width:100%;height:100%;position:absolute;top:0;left:0;pointer-events:none}");const k=[],P=function(e,t,n,o){};c.io.addCache=e=>{k.push(e)},P.run=e=>new Promise((t,n)=>{let o=0,i=0;const r=e=>{const t=k.find(t=>t.type===e.type);t&&e[t.field]&&s.push(e)},s=[];e.scenes.forEach(e=>{e.blocks.forEach(e=>{r(e),"group"===e.type&&e.blocks.forEach(e=>r(e))})}),0===s.length&&t(),s.forEach(e=>{o++,(e=>{fetch(e.url).then(n=>{n.text().then(n=>{e._cache=n,i++,i===o&&t()})}).catch(n=>{i++,e._cache=n+": "+e.url,i===o&&t()})})(e)})});const z=[],F=function(e,t,n,o){},C=(e,t)=>{const n=z.find(t=>t.type===e.type);n&&(n.html?((e,t)=>{const n=(new DOMParser).parseFromString(e.text,"text/html").body,o=n.querySelectorAll("img");Array.from(o).forEach(e=>{const n=e.getAttribute("src");new RegExp("^(?:[a-z]+:)?//","i").test(n)||(e.src=t+n)}),e.text=n.innerHTML})(e,t):((e,t,n)=>{const o=e[t];o&&n&&(new RegExp("^(?:[a-z]+:)?//","i").test(o)||(e[t]=n+o))})(e,n.field,t))};F.run=(e,t)=>new Promise((n,o)=>{const i=t;e.scenes.forEach(e=>{e.blocks.forEach(e=>{("group"===e.type?e.blocks:[e]).forEach(e=>{C(e,i)})})}),n()});c.io.addBaseurl=e=>{z.push(e)};e(".brandPosition__tl{--brandFlexAlign:flex-start;--brandFlexJustify:flex-start}.brandPosition__tc{--brandFlexAlign:flex-start;--brandFlexJustify:center}.brandPosition__tr{--brandFlexAlign:flex-start;--brandFlexJustify:flex-end}.brandPosition__cl{--brandFlexAlign:center;--brandFlexJustify:flex-start}.brandPosition__cc{--brandFlexAlign:center;--brandFlexJustify:center}.brandPosition__cr{--brandFlexAlign:center;--brandFlexJustify:flex-end}.brandPosition__bl{--brandFlexAlign:flex-end;--brandFlexJustify:flex-start}.brandPosition__bc{--brandFlexAlign:flex-end;--brandFlexJustify:center}.brandPosition__br{--brandFlexAlign:flex-end;--brandFlexJustify:flex-end}.brandDirection__horizontal{--brandDirection:row;--brandIconMargin:0 3px}.brandDirection__vertical{--brandDirection:column;--brandIconMargin:3px 0}");var j="style_brand__3UVOs",E="style_inner__e7SIS",A="style_content__3ybq1",S="style_hide__3EO9o";e(":root{--brandPadding:0;--brandBackColor:none;--brandFlexAlign:flex-start;--brandFlexJustify:flex-start}.style_brand__3UVOs{width:100%;height:100%;position:absolute;top:0;left:0;z-index:200;padding:var(--containerPaddingTop) var(--containerPaddingRight) var(--containerPaddingBottom) var(--containerPaddingLeft);pointer-events:none;transition:opacity .35s}.style_inner__e7SIS{width:100%;height:100%;display:flex;align-items:var(--brandFlexAlign);justify-content:var(--brandFlexJustify);padding:var(--brandPadding)}.style_content__3ybq1{padding:var(--brandInnerPadding);color:var(--brandColor);background-color:var(--brandBackColor);border:var(--brandBorder);border-radius:var(--brandBorderRadius);pointer-events:all}.style_hide__3EO9o{opacity:0}"),c.addProp(["brandPadding","brandInnerPadding","brandBackColor","brandColor","brandBorder","brandBorderRadius","brandFlexAlign","brandFlexJustify"]),c.addGlob(["brandPosition"]);const L=function(e,t,n,o){},$=e=>{setTimeout(()=>{const t=document.createElement("link");t.href=e,t.rel="stylesheet",t.type="text/css",document.head.appendChild(t)})};L.run=(e,t)=>new Promise((n,o)=>{const i=t.text,r=t.heading,s=e._root;i&&($(i.url),s.style.setProperty("--fontText",i.name)),r&&($(r.url),s.style.setProperty("--fontHeading",r.name)),n()});const B={autoplay:function(e,t,n,o){let i=null;const r="number"==typeof n?n:4e3,s=e=>{clearTimeout(i),i=setTimeout(()=>{t.next()},e)};t.on("indexChanged",e=>{const t=o.scenes[e.currentIndex].autoplay||r;s(t)}),t.on("stepChanged",e=>{const t=o.scenes[e.currentIndex].autoplay||r;s(t)})},keyboard:function(e,t,n,o){e.parentNode.addEventListener("keyup",e=>{"ArrowRight"!==e.key&&"ArrowDown"!==e.key||(t.next(),e.stopPropagation(),e.preventDefault()),"ArrowLeft"!==e.key&&"ArrowUp"!==e.key||(t.prev(),e.stopPropagation(),e.preventDefault())})},arrows:function(e,l,d,_){let p=null,u=0;const h="vertical"===d?r:"",g=h?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-up-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="16 12 12 8 8 12"></polyline><line x1="12" y1="16" x2="12" y2="8"></line></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 8 8 12 12 16"></polyline><line x1="16" y1="12" x2="8" y2="12"></line></svg>',y=h?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg>',f=c.div(`<div class="${t} ${h}"></div>`),x=c.div(`<div class="${n}"></div>`),v=c.div(`<div id="evt_trg_ctrl_arrow_left" class="${o}">\n    <div class="${s}">${g}</div>\n  </div>`);x.appendChild(v);const m=c.div(`<div id="evt_trg_ctrl_arrow_right" class="${i}">\n    <div class="${s}">${y}</div>\n  </div>`);x.appendChild(m),f.appendChild(x),e.appendChild(f),v.addEventListener("click",e=>{l.prev(),w()}),m.addEventListener("click",e=>{l.next(),w()});const b=t=>{u++,2===u&&e.parentNode.addEventListener("mousemove",e=>{w()}),v.style.visibility="visible",m.style.visibility="visible",t.isFirst&&(v.style.visibility="hidden"),t.isLast&&t.totalSteps===t.currentStep&&(m.style.visibility="hidden")};l.on("stepChanged",e=>{b(e)}),l.on("indexChanged",e=>{b(e)}),l.on("inited",e=>{b(e)});const w=()=>{clearTimeout(p),f.classList.remove(a),p=setTimeout(()=>{f.classList.add(a)},1500)};this._el=f},black:function(e,t,n,o){let i=!1;const r=c.div(`<div class="${_}"></div>`);e.appendChild(r);const s=n.key||"b";e.parentNode.addEventListener("keyup",e=>{e.key===s&&(i=!i,r.style.opacity=i?1:0,e.stopPropagation(),e.preventDefault())})},fullscreen:function(e,t,n,o){const i=n.key||"f",r=e.parentNode,s=r.parentNode,a=()=>{var e;document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():(e=s).requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen&&e.msRequestFullscreen()};this.toggle=a,t.on("toggleFullscreen",a),r.addEventListener("keyup",e=>{e.key===i&&(a(),e.stopPropagation(),e.preventDefault())})},focus:function(e,t,n,o){const i=e.parentNode;new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&i.focus({preventScroll:!0})})}).observe(i)},preload:u,progressbar:function(e,t,n,o){const i=c.div(`<div class="${h}"></div>`),r=c.div(`<div class="${g}"></div>`);i.appendChild(r),e.appendChild(i);const s=o.scenes.length;t.on("indexChanged",e=>{(e=>{const t=(e.currentIndex+1)/s*100;r.style.width=t+"%"})(e)})},pagenum:function(e,t,n,o){const i=c.div(`<div class="${y}"></div>`),r=c.div(`<div class="${f}"></div>`),s=c.div(`<div class="${x}"></div>`);r.appendChild(s),i.appendChild(r),e.appendChild(i);const a="string"==typeof n?n:"%s / %S",l=o.scenes.length;t.on("indexChanged",e=>{(e=>{const t=e.currentIndex+1,n=a.replace(/%s/gm,t).replace(/%S/gm,l);s.innerHTML=n})(e)})},shuffle:function(e,t,n,o){(e=>{for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}})(o.scenes)},loop:function(e,t,n,o){t.on("end",e=>{t.goto(0)})},current:function(e,t,n,o){const i=n&&n>0&&n<o.scenes.length?n-1:0;t.setCurrentIndex(i)},hidecursor:function(e,t,n,o){e.parentNode.style.cursor="none"},hidden:function(e,t,n,o){const i=[],r=o.scenes;r.forEach((e,t)=>{const n=e.blocks,o=[];e.hidden?i.push(t):n.forEach((e,t)=>{e.hidden&&o.push(t)});for(var r=n.length-1;r>=0;r--)o.indexOf(r)>=0&&n.splice(r,1)});for(var s=r.length-1;s>=0;s--)i.indexOf(s)>=0&&r.splice(s,1)},limitswitch:function(e,t,n,o){let i,r;const s=c.div(`<div class="${v}"></div>`);e.appendChild(s);const a=()=>{clearTimeout(i),clearTimeout(r),s.classList.remove(m,b),s.classList.add(m),i=setTimeout(()=>{s.classList.add(b)},16),r=setTimeout(()=>{s.classList.remove(m,b)},350)};t.on("begin",e=>{a()}),t.on("end",e=>{a()})},sync:function(e,t,n,o){if(!window.BroadcastChannel)return console.log("[sync controller] disabled due browser incompatibility"),!1;const i=new BroadcastChannel("presenta.sync"),r=c.div(`<div class="${w}"></div>`);e.appendChild(r),i.onmessage=t=>{const n=t.data,o=n.name,i=n.props;if(0===o.indexOf("key")){const t={key:i.key};e.parentNode.dispatchEvent(new KeyboardEvent(o,t))}if(0===o.indexOf("mouse")||0===o.indexOf("click")){const t={x:i.x,y:i.y},n=i.uuid;((n?e.parentNode.querySelector("#"+n):e.parentNode)||e.parentNode).dispatchEvent(new MouseEvent(o,t))}};const s=(e,t)=>{const n={key:t.key,type:t.type};t.isTrusted&&i.postMessage({name:e,props:n})};e.parentNode.addEventListener("keydown",e=>{s("keydown",e)}),e.parentNode.addEventListener("keyup",e=>{s("keyup",e)}),e.parentNode.addEventListener("click",e=>{((e,t)=>{console.log(t.target,t.currentTarget);const n=t.target,o={uuid:n?n.getAttribute("id"):null,type:t.type,x:t.clientX,y:t.clientY};t.isTrusted&&i.postMessage({name:e,props:o})})("click",e)})},rsync:function(e,t,n,o){if(!window.BroadcastChannel)return console.log("rsync controller is disabled because browser incompatibility"),!1;const i=new BroadcastChannel("presenta.rsync");let r=!1;const s=(e,t)=>{r||i.postMessage({name:e,props:t}),r=!1};t.on("next",e=>{s("next",e)}),t.on("prev",e=>{s("prev",e)}),t.on("goto",e=>{s("goto",e)}),i.onmessage=e=>{const n=e.data,o=n.name,i=n.props;switch(r=!0,o){case"next":t.next();break;case"prev":t.prev();break;case"goto":t.goto(i.currentIndex)}}},cache:P,baseurl:F,brand:function(e,t,n,o){let i=null;const r=c.div(`<div class="${j}"></div>`),s=c.div(`<div class="${E}"></div>`),a=c.div(`<div class="${A}"></div>`);s.appendChild(a),r.appendChild(s),e.appendChild(r),this._el=r,a.innerHTML=n.source,e.parentNode.addEventListener("mousemove",e=>{l()});const l=()=>{clearTimeout(i),r.classList.remove(S),i=setTimeout(()=>{r.classList.add(S)},3e3)}},fonts:L};var O={stepItem:"style_stepItem__1Iv29",fadeIn:"style_fadeIn__1qNon",zoomOut:"style_zoomOut__FobL2",zoomIn:"style_zoomIn__3R2ad",slideUp:"style_slideUp__2aPxJ",slideDown:"style_slideDown__3Wu--"};e(".style_stepItem__1Iv29{transition:opacity 1.33s cubic-bezier(.19,1,.22,1),transform 1.33s cubic-bezier(.19,1,.22,1);transform-origin:center}.style_fadeIn__1qNon{opacity:0!important}.style_zoomOut__FobL2{opacity:0!important;transform:scale(1.3)!important}.style_zoomIn__3R2ad{opacity:0!important;transform:scale(.7)!important}.style_slideUp__2aPxJ{opacity:0!important;transform:translateY(40px)!important}.style_slideDown__3Wu--{opacity:0!important;transform:translateY(-40px)!important}");const T=["fadeIn","zoomOut","zoomIn","slideUp","slideDown"],I=["sequential","match"],q=e=>{let t=null,n=null,o=null,i=null;return"string"==typeof e&&(t=e),"object"==typeof e&&(t=e.selector,n=e.transition,o=e.mode,i=e.out),{tag:t,trans:n,mode:o,out:i}},J={steps:function(e,t,n){if("present"!==n._mode)return;const o=q(t);let i=o.tag||".step";const r=o.out||!1;let s=o.trans||T[0];const a=o.mode||I[0],l=q(n.steps);let d=l.mode||l.tag||a;-1===I.indexOf(d)&&(d=I[0]),i=l.tag||i,s=l.trans||s;let c=0;const _={};let p=[];const u=n.blocks.filter(e=>!(e.hasOwnProperty("steps")&&!e.steps));let h=null;u.forEach(e=>{const t=e._el,o=q(e.steps),a=o.tag||i,l=o.out||r;let u=o.trans||s;-1===T.indexOf(u)&&(u=T[0]);const h=a.split(","),g=[];h.forEach(e=>{const n=e.indexOf("#")>=0,o=t[n?"querySelector":"querySelectorAll"](e);if(n)g.push({selector:e,els:o?[o]:[]});else{const t=Array.from(o);t.sort((e,t)=>e.dataset.order-t.dataset.order),g.push({selector:e,els:t})}}),"sequential"===d&&g.forEach(e=>{const t=e.els;p=p.concat(t),t.forEach(e=>{e.classList.add(O[u]);const t={sandbox:"steps",index:c,trans:u,out:l,els:[e]};n._steps.push(t),c++})}),"match"===d&&g.forEach(e=>{const t=e.selector,n=e.els;_[t]?(_[t].arr=_[t].arr.concat(n),_[t].outs.push(l)):_[t]={arr:n,trans:u,outs:[l]}})});for(const e in _){const t=_[e].trans,o=_[e].outs;_[e].arr.forEach(e=>e.classList.add(O[t]));const i={sandbox:"steps",index:c,trans:t,outs:o,out:o.find(e=>!0===e),els:_[e].arr};n._steps.push(i),c++}setTimeout(()=>{p.forEach(e=>{e.classList.add(O.stepItem)});for(const e in _)_[e].arr.forEach(e=>e.classList.add(O.stepItem))},100),this.stepForward=e=>{if("steps"===e.sandbox){h&&(h.forEach((t,n)=>{(e.outs?e.outs[n]:e.out)&&t.classList.add(O[e.trans])}),h=null);const t=e.els;t.forEach(t=>t.classList.remove(O[e.trans])),e.out&&(h=t)}}}};e(".textVar__title{--textPadding:3rem;--textAlign:center;--textListAlign:center;--textFlexAlign:center;--textFlexJustify:center;--textSize:2.5rem}.textVar__text{--textAlign:left;--textListAlign:left;--textFlexJustify:flex-start;--textSize:1rem}.textVar__section,.textVar__text{--textPadding:2rem;--textFlexAlign:flex-start}.textVar__section{--textAlign:right;--textListAlign:right;--textFlexJustify:flex-end;--textSize:2rem}.textVar__mention{--textAlign:left;--textListAlign:left;--textFlexJustify:flex-start;--textSize:1.5rem}.textVar__mention,.textVar__suggest{--textPadding:2rem;--textFlexAlign:flex-end}.textVar__suggest{--textAlign:center;--textListAlign:center;--textFlexJustify:center;--textSize:0.8rem}.textStyle__a{--textboxpadding:0;--textboxbackcolor:var(--colorFore);--textboxradius:0;--textboxborder:0;--textboxshadow:0 0 0 var(--colorAccent);--textboxcolor:var(--colorBack)}");var R={text:"style_text__3T1cl",promise:"style_promise__1-2R_",inner:"style_inner__11UJC",pretext:"style_pretext__cLjqD",textbox:"style_textbox__1Vb-V",itext:"style_itext__jz90o"};e(':root{--textPadding:0;--textAlign:center;--textListAlign:left;--textFlexAlign:center;--textFlexJustify:center;--textSize:1rem;--textWidth:auto}.style_text__3T1cl{width:100%;height:100%;position:relative;color:var(--colorFore)}.style_promise__1-2R_{visibility:hidden}.style_inner__11UJC{position:relative;width:100%;height:100%}.style_pretext__cLjqD{display:flex;width:100%;height:100%;align-items:var(--textFlexAlign);justify-content:var(--textFlexJustify)}.style_textbox__1Vb-V{padding:var(--textboxpadding);text-align:var(--textAlign);font-size:var(--textSize);color:var(--textboxcolor);--backmark:var(--colorAccent);--foremark:var(--colorBack);--textaccentcolor:var(--colorAccent);font-family:var(--fontText);width:var(--textWidth)}.style_itext__jz90o{border:var(--textboxborder) solid var(--colorAccent);padding:var(--textPadding);border-radius:var(--textboxradius);box-shadow:var(--textboxshadow);background-color:var(--textboxbackcolor)}.style_itext__jz90o img{-o-object-fit:contain;object-fit:contain;height:4em;vertical-align:middle}.style_itext__jz90o mark{background-color:var(--backmark);color:var(--foremark);padding:.5rem;display:inline-block}.style_itext__jz90o high{color:var(--textaccentcolor)}.style_itext__jz90o bord{border:8px solid var(--backmark);padding:0 .5rem}.style_itext__jz90o a{color:var(--textaccentcolor);text-decoration:underline}.style_itext__jz90o blockquote{font-size:2em;font-weight:400;font-style:italic}.style_itext__jz90o blockquote,.style_itext__jz90o h1,.style_itext__jz90o h2,.style_itext__jz90o h3,.style_itext__jz90o h4,.style_itext__jz90o h5,.style_itext__jz90o h6,.style_itext__jz90o p,.style_itext__jz90o ul{margin:0}.style_itext__jz90o h1 b,.style_itext__jz90o h1 strong,.style_itext__jz90o h2 b,.style_itext__jz90o h2 strong,.style_itext__jz90o h3 b,.style_itext__jz90o h3 strong,.style_itext__jz90o h4 b,.style_itext__jz90o h4 strong,.style_itext__jz90o h5 b,.style_itext__jz90o h5 strong,.style_itext__jz90o h6 b,.style_itext__jz90o h6 strong{color:var(--textaccentcolor)}.style_itext__jz90o>ol,.style_itext__jz90o>ul{font-size:1.5em;line-height:1.1em}.style_itext__jz90o ol,.style_itext__jz90o ul{text-align:var(--textListAlign);margin:0;list-style-type:none;counter-reset:li;padding:.5em 0}.style_itext__jz90o li{list-style-position:inside;margin-bottom:2px;padding:.25em .25em .25em .8em}.style_itext__jz90o ul li:before{content:"\\2013";display:inline-block;width:.8em;margin-left:-.8em}.style_itext__jz90o ol li:before{counter-increment:li;content:"." counter(li);display:inline-block;width:1.1em;margin-left:-1.3em;margin-right:.2em;text-align:right;direction:rtl}.style_itext__jz90o li p{display:inline}.style_itext__jz90o code,.style_itext__jz90o pre{text-align:left;margin:0}.style_itext__jz90o h1,.style_itext__jz90o h2,.style_itext__jz90o h3,.style_itext__jz90o h4,.style_itext__jz90o h5,.style_itext__jz90o h6{font-family:var(--fontHeading);padding:.5rem 0}.style_itext__jz90o h1{font-size:2em}.style_itext__jz90o h2{font-size:1.5em}.style_itext__jz90o h3{font-size:1.17em}.style_itext__jz90o h4{font-size:1em}.style_itext__jz90o h5{font-size:.83em}.style_itext__jz90o h6{font-size:.67em}.style_itext__jz90o p{padding:.5rem 0}.style_itext__jz90o hr{border:1px solid var(--colorFore);margin:.5rem 0}.style_itext__jz90o h1:first-child,.style_itext__jz90o h1:last-child,.style_itext__jz90o h2:first-child,.style_itext__jz90o h2:last-child,.style_itext__jz90o h3:first-child,.style_itext__jz90o h3:last-child{padding:0}.style_itext__jz90o table{width:100%}.style_itext__jz90o tr{padding:0}.style_itext__jz90o td,.style_itext__jz90o th{padding:.5rem;border-bottom:1px solid var(--colorFore)}.style_itext__jz90o small{font-size:.6em}');const D=function(e,t){const n=this;return new Promise((o,i)=>{const r=t.text||"";let s=1;t.responsive&&t._portrait&&(s=2);let a=1;t.textVar&&(a={title:2.5,text:1,section:2,mention:1.5,suggest:.8}[t.textVar]);let l=t.scale||a*s;const d=c.div(`<div class="c ${R.text} ${R.promise}">\n    <div class="${R.inner}">\n      <div class="pretext ${R.pretext}">\n        <div class="${R.textbox}">\n          <div class="textContent ${R.itext} ${R.fadein}">\n            ${r}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>`);e.appendChild(d);let _=d.querySelectorAll("img");_&&(_=[..._].forEach(e=>{const t=e.getAttribute("alt");if(t){const n=+t;n>0&&(e.style.height=4*n+"em")}}));const p=()=>{d.style.setProperty("--textSize",l+"rem");const e=d.querySelector("."+R.inner).getBoundingClientRect(),t=d.querySelector("."+R.textbox).getBoundingClientRect();if(parseInt(e.width)<parseInt(t.width)||parseInt(e.height)<parseInt(t.height))return l-=.1,p();setTimeout(()=>{d.classList.remove(R.promise),o(n)})};setTimeout(p)})};D.init=()=>{c.addGlob(["textVar","textStyle"]),c.addProp(["textPadding","textAlign","textFlexAlign","textFlexJustify","textWidth"]),c.io.addBaseurl&&c.io.addBaseurl({type:"text",html:!0}),c.io.addMarkdown&&c.io.addMarkdown({type:"text",field:"text"})};var N="style_inner__3WOWs",M="style_frame__28PUh",V="style_embed__2Pre2",W="style_loading__1w7wc",U="style_blockmouse__3bXSl",H="style_poster__1TOx3";e(":root{--embedPadding:0;--embedBackcolor:none;--embedPosterSize:cover;--embedPosterPosition:center}.style_inner__3WOWs{padding:var(--embedPadding);position:relative}.style_frame__28PUh{background-color:var(--embedBackcolor);position:relative}.style_embed__2Pre2,.style_frame__28PUh,.style_inner__3WOWs{width:100%;height:100%}.style_frame__28PUh>iframe{width:100%;height:100%;border:none}.style_loading__1w7wc{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:var(--colorFore);font-family:var(--fontText);background-color:var(--colorBack)}.style_loading__1w7wc mark{background-color:var(--colorAccent);color:var(--colorBack)}.style_blockmouse__3bXSl,.style_poster__1TOx3{position:absolute;top:0;left:0;width:100%;height:100%}.style_poster__1TOx3{background-color:var(--colorBack)}.style_poster__1TOx3 img{width:100%;height:100%;-o-object-fit:var(--embedPosterSize);object-fit:var(--embedPosterSize);-o-object-position:var(--embedPosterPosition);object-position:var(--embedPosterPosition)}");const G=function(e,t){t._mode;const n="present"===t._mode;let o=null;t.url&&(o=`<iframe src="${t.url}"></iframe>`),t.code&&(o=t.code);const i=(e=>{if(!e)return"";const t=new RegExp('src="(.*)',"gim").exec(e)[1].match(/http(s?):\/\/([\w]+\.){1}([\w]+\.?)+/gim);return t&&t.length>0?t[0]:null})(o),r=`<div class="cover ${W}"><h1>${i?`Embed from <mark>${i}</mark>`:"Embed resource"}</h1></div>`,s=t.blockPointer?`<div class='${U}' />`:"",a=t.poster?`<div class="${H}"><img src="${t.poster}" /></div>`:"",l=c.div(`<div class="c ${V}">\n    <div class="${N}">\n        <div class="${M}">${o}</div>\n        ${r}\n        ${a}\n        ${s}\n    </div>\n  </div>`);if(e.appendChild(l),this.beforeDestroy=()=>{},o&&n){l.querySelector("iframe").addEventListener("load",()=>{l.querySelector("."+W).style.display="none",a&&(l.querySelector("."+H).style.display="none")})}};G.init=()=>{c.addProp(["embedPadding","embedBackcolor","embedPosterSize","embedPosterPosition"])};var Z="style_image__1fZIQ",Q="style_inner__3tyMU",K="style_preimg__2ypvx";e(":root{--imagePadding:0;--imageBorder:none;--imageShadow:none;--imageSize:cover;--imagePosition:center;--imageWidth:100%;--imageHeight:100%}.style_image__1fZIQ,.style_inner__3tyMU{width:100%;height:100%}.style_inner__3tyMU{display:flex}.style_preimg__2ypvx{flex:1;padding:var(--imagePadding);display:flex;align-items:center;justify-content:center}.style_preimg__2ypvx img{width:var(--imageWidth);height:var(--imageHeight);border:var(--imageBorder);box-shadow:var(--imageShadow);-o-object-fit:var(--imageSize);object-fit:var(--imageSize);-o-object-position:var(--imagePosition);object-position:var(--imagePosition)}");e(".imageStyle__solid{--imageWidth:auto;--imageHeight:auto}");const Y=function(e,t){const n=t.url,o=t.step?"step":"",i=`<div class="presentablock__image ${K}">\n        <img src="${n}" />\n      </div>`,r=c.div(`<div class="${Z} ${o}">\n    <div class="imagesContainer ${Q}">\n        ${i}\n    </div>\n  </div>`);this.beforeDestroy=()=>{},e.appendChild(r)};Y.init=()=>{c.addGlob(["imageStyle"]),c.addProp(["imagePadding","imageBorder","imageShadow","imageSize","imagePosition","imageWidth","imageHeight"]),c.io.addPreload&&c.io.addPreload({type:"image",field:"url",as:"image"}),c.io.addBaseurl&&c.io.addBaseurl({type:"image",field:"url"})};var X="style_video__1qbdJ";e(":root{--videoSize:cover;--videoPosition:center}.style_video__1qbdJ{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.style_video__1qbdJ video{width:100%;height:100%;-o-object-fit:var(--videoSize);object-fit:var(--videoSize);-o-object-position:var(--videoPosition);object-position:var(--videoPosition);pointer-events:none}");const ee=function(e,t){t._mode;const n="present"===t._mode,o=t.poster?"poster="+t.poster:"",i=t.loop?"loop":"",r=t.muted?"muted":"",s=t.autoplay&&n?"autoplay":"",a=t.url?"src="+t.url:"",l=c.div(`<div class="${X}" id="evt_trg_uid_block_video_${t._index}">\n    <video ${o} ${a} ${i} ${s} ${r}></video>\n  </div>`);let d;this.beforeDestroy=()=>{t._rootElement.removeEventListener("keyup",u),l.removeEventListener("click",p)},e.appendChild(l);let _=t.autoplay;const p=e=>{d||(d=l.querySelector("video")),_?d.pause():d.play(),_=!_},u=e=>{" "===e.key&&(p(),e.stopPropagation(),e.preventDefault()),"r"===e.key&&d&&(d.currentTime=0),"m"===e.key&&d&&(d.volume=d.volume?0:1),"+"===e.key&&d&&(d.volume+=.1),"-"===e.key&&d&&(d.volume-=-.1)};n&&(t._rootElement.addEventListener("keyup",u),l.addEventListener("click",p))};ee.init=()=>{c.addProp(["videoSize","videoPosition"]),c.io.addPreload&&c.io.addPreload({type:"video",field:"url",as:"video"}),c.io.addBaseurl&&c.io.addBaseurl({type:"video",field:"url"})};var te="style_svg__2xfFu",ne="style_inner__AjKjt";e(":root{--svgPadding:0}.style_inner__AjKjt,.style_svg__2xfFu{width:100%;height:100%}.style_inner__AjKjt{padding:var(--svgPadding)}.style_svg__2xfFu svg{width:100%;height:100%}");const oe=function(e,t){const n=t._cache||t.code;if(!n)return console.log("[block svg]","The svg is not present");const o=c.div(`<div class="c ${te}">\n        <div class="${ne}">\n            ${n}\n        </div>\n    </div>`);e.appendChild(o),this.beforeDestroy=()=>{}};oe.init=()=>{c.addProp(["svgPadding"]),c.io.addCache&&c.io.addCache({type:"svg",field:"url"}),c.io.addBaseurl&&c.io.addBaseurl({type:"svg",field:"url"})};const ie={text:D,embed:G,image:Y,video:ee,svg:oe},re=(e,t,n)=>{if(ie[e])return console.warn(`block type ${e} already defined`);n&&ie[e]&&console.warn(`block type ${e} was overriden`),ie[e]=t};var se="splash_splash__3mb9V",ae="splash_spinner__3jef_";e(".splash_splash__3mb9V{width:100%;height:100%;background-color:var(--colorBack);color:var(--colorFore);display:flex;flex-direction:column;align-items:center;justify-content:center;font-family:var(--fontHead)}.splash_spinner__3jef_{display:flex;animation:splash_spin__Dy8Lf 2s linear infinite}@keyframes splash_spin__Dy8Lf{to{transform:rotate(1turn)}}");const le=function(e,t){const n=getComputedStyle(e);let o=+n.width.split("px")[0],i=+n.height.split("px")[0];o<50&&(o=360,e.style.width=o+"px"),i<50&&(i=200,t&&(i=o/t.aspect),e.style.height=i+"px");const r=t.loading||"",s=c.div(`<div class="${se}">\n    <div class="${ae}"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-loader"><line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line></svg></div>\n    ${r}\n  </div>`);e.appendChild(s),c.globs(s,t),this.destroy=()=>{e.removeChild(s)}};var de="container_mainwrapper__zelcO",ce="container_superContainer__2mwZX",_e="container_container__3kBNh";e(":root{--containerPaddingTop:0;--containerPaddingLeft:0;--containerPaddingRight:0;--containerPaddingBottom:0}.container_mainwrapper__zelcO{width:100%;height:100%;position:relative;overflow:hidden;outline:none}.container_superContainer__2mwZX{padding:var(--containerPaddingTop) var(--containerPaddingRight) var(--containerPaddingBottom) var(--containerPaddingLeft)}.container_container__3kBNh,.container_superContainer__2mwZX{width:100%;height:100%;position:relative;overflow:hidden}.container_container__3kBNh>div{position:absolute;top:0;left:0}");var pe="router_router__2r4NQ",ue="router_ignorePad__4q1nG";e(".router_router__2r4NQ{width:100%;height:100%;position:absolute;top:0;left:0;pointer-events:none}.router_router__2r4NQ>div{padding:var(--containerPaddingTop) var(--containerPaddingRight) var(--containerPaddingBottom) var(--containerPaddingLeft)}.router_router__2r4NQ>div.router_ignorePad__4q1nG{padding:0}");const he=function(e,t){const n=c.div(`<div class="controller ${pe}"></div>`);e.appendChild(n);const o=t.scenes,i=()=>o.length-1,r={},s={};let a=0,l=0;const d=()=>o[a]&&o[a]._steps?o[a]._steps.length:0;this.next=()=>{l===d()?this.nextIndex():(l++,_("stepChanged")),_("next")},this.prev=()=>{this.prevIndex(),_("prev")},this.nextIndex=()=>{a<i()?(a++,l=0,_(["nextIndex","indexChanged"])):(a=i(),l=d(),_("end"))},this.prevIndex=()=>{a>0?(a--,l=0,_(["prevIndex","indexChanged"])):(a=0,l=0,_("begin"))},this.goto=e=>{const t=a>e?"prevIndex":"nextIndex";a=e<i()?e:i(),l=0,_(["goto",t,"indexChanged"])};const _=e=>{(Array.isArray(e)?e:[e]).forEach(e=>{"indexChanged"===e&&(()=>{const e=o[a];n.classList.remove(...n.classList),n.classList.add("controller",pe),n.style=null,c.globs(n,e),c.props(n,e)})(),r[e]&&r[e].forEach(t=>{t({name:e,currentIndex:a,currentStep:l,totalScenes:this.totalScenes(),totalSteps:d(),isFirst:this.isFirst(),isLast:this.isLast()})})})};if(this.on=(e,t)=>{r[e]||(r[e]=[]),r[e].push(t)},this.off=(e,t)=>{const n=r[e].indexOf(t);n>=0&&r[e].splice(n,1)},this.totalScenes=()=>i()+1,this.totalSteps=()=>d(),this.currentIndex=()=>a,this.currentStep=()=>l,this.isFirst=()=>0===a,this.isLast=()=>a===i(),this.setCurrentIndex=e=>a=e,this.setCurrentStep=e=>l=e,this.controllers=s,this.dispatch=(e,t)=>{r[e]&&r[e].forEach(e=>{e(t)})},t.controllers)for(const e in t.controllers){const o=t.controllers[e],i=B[e];if(i||console.log(`Controller "${e}" not found. Maybe you forgot to include it.`),o&&i){const r=new i(n,this,o,t);s[e]=r,o.ignorePad&&(r._el?r._el.classList.add(ue):console.warn(`Controller ${e} uses ignorePad but _el is undefined`))}}_("indexChanged"),setTimeout(()=>{_("init"),setTimeout(()=>{_("inited")})})};var ge="scene_sceneContainer__IgSpB",ye="scene_scene__3uvTl",fe="scene_wrapper__3yr1k",xe="scene_noResize__M8OwW",ve="scene_content__1rJf0",me="scene_fcontainer__1E_0g",be="scene_viewport__3uNLS";e(":root{--scenePadding:0}.scene_sceneContainer__IgSpB{width:100%;height:100%;display:flex;align-items:center;justify-content:center;position:relative}.scene_scene__3uvTl{--presenta-sw:calc(var(--presenta-w)/var(--presenta-p)/var(--presenta-fz));--presenta-sh:calc(var(--presenta-h)/var(--presenta-p)/var(--presenta-fz));--presenta-scal:calc(var(--presenta-pw)/var(--presenta-p)/var(--presenta-pw)/var(--presenta-fz));width:var(--presenta-sw);height:var(--presenta-sh);font-family:serif}.scene_promise__24VCP{visibility:hidden}.scene_wrapper__3yr1k{width:var(--presenta-w);height:var(--presenta-h);transform:scale(1);transform:scale(var(--presenta-scal));transform-origin:top left;overflow:hidden;padding:var(--scenePadding);background-color:var(--sceneBackColor)}.scene_noResize__M8OwW.scene_scene__3uvTl{width:100%;height:100%}.scene_noResize__M8OwW .scene_wrapper__3yr1k{width:100%;height:100%;transform:scale(1)}.scene_content__1rJf0{width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden}.scene_fcontainer__1E_0g{top:0;left:0;width:100%;height:100%;position:absolute;pointer-events:none}.scene_viewport__3uNLS{width:100%;height:100%;position:relative;flex:1;overflow:hidden;display:flex;flex-direction:row}.scene_viewport__3uNLS>div{height:100%}");var we="block_block__BWbaZ",ke="block_inner__3LS6s",Pe="block_bdecoration__3KJh-",ze="block_fdecoration__12tBw";e(".block_block__BWbaZ{background:var(--colorBack);width:100%;height:100%;flex:1;flex:var(--blockWeight);overflow:hidden;position:relative}.block_inner__3LS6s{width:100%;height:100%;padding:var(--blockPadding);opacity:var(--blockOpacity);mix-blend-mode:var(--blockBlend)}.block_bdecoration__3KJh-,.block_inner__3LS6s{top:0;left:0;width:100%;height:100%;position:absolute}.block_fdecoration__12tBw{pointer-events:none}");const Fe=function(e,t){const n=this;return new Promise((o,i)=>{n.type=t.type,n.index=t._index;var r=null;if(!n.type)return console.warn("No `type` field found in block "+n.index);const s=t.id&&0===t.id.indexOf("#")?`id="${t.id.replace("#","")}"`:"",a=c.div(`<div class="block ${we} b b${n.index}">\n    <div class="backDecoration ${Pe}"></div>\n    <div ${s} class="blockContainer ${ke}"></div>\n    <div class="frontDecoration ${ze}"></div>\n  </div>`);c.globs(a,t),c.props(a,t);const l=a.querySelector(".blockContainer");if(ie[n.type]){const e=new ie[n.type](l,t);Promise.all([e]).then(e=>{r=e[0],o(n)})}else console.log(`block "${n.type}" not found`);n.beforeDestroy=()=>{r&&r.beforeDestroy&&r.beforeDestroy()},n.stepForward=(e,t)=>{r.stepForward&&r.stepForward(e,t)},n.destroy=()=>{r&&r.destroy&&r.destroy()},e.appendChild(a),t._el=a})},Ce=e=>new function(e){this.clear=t=>(e.classList.remove(t),this),this.init=t=>(e.classList.add(t,"p-scene-enter-transition","p-scene-enter-start"),this),this.start=t=>(setTimeout(()=>{e.classList.remove("p-scene-enter-start"),e.classList.add("p-scene-enter-end")}),this),this.swap=()=>(e.classList.add("p-scene-enter-ended"),this),this.end=t=>(e.classList.remove("p-scene-enter-transition","p-scene-enter-end"),e.classList.add(t,"p-scene-leave-transition","p-scene-leave-start"),setTimeout(()=>{e.classList.add("p-scene-leave-end"),e.classList.remove("p-scene-leave-start")}),this)}(e),je=function(e,t,n,o){const i=this;return new Promise((r,s)=>{let a=[],l=[];const d=[];if(!t.blocks)return console.warn("No `blocks` array found in scene "+t.index);if(0===t.blocks.length&&console.warn("`blocks` is empty in scene "+t.index),n.modules)for(const e in n.modules)t.hasOwnProperty("modules")||(t.modules={}),t.modules.hasOwnProperty(e)||(t.modules[e]=n.modules[e]);const _=t.transition||n.transition;let p=0;t._steps=[];const u=t._steps,h=t.noResize||n.noResize?xe:"",g=c.div(`<div \n      class="s ${ge}">\n      <div class="sceneObject ${ye} ${h}">\n        <div class="${fe}">\n            <div class="${ve}">\n                <div class="layout blocksContainer ${be}"></div>\n                <div class="frontContainer ${me}"></div>\n            </div>\n        </div>\n      </div>\n  </div>`);e.appendChild(g),c.globs(g,t),c.props(g,t),t._el=g,t._rootElement=o,t._mode=n.mode;const y=t.blocks,f=[];y.forEach((e,i)=>{e._index=i,e._portrait="portrait"===n._orientation,e._mode=n.mode,e._rootElement=o,e._sceneConfig=t;const r=g.querySelector(".blocksContainer");f.push(new Fe(r,e))});i.destroyAfter=e=>{if(_){const e=g.querySelector(".sceneObject"),n="backward"===t._presentatransdir?"to-right":"to-left",o="backward"===t._presentatransdir?"to-left":"to-right";Ce(e).clear(n).end(o)}const n=e||0;l.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()}),a.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()}),setTimeout(()=>{i.destroy(),g.parentNode.removeChild(g)},n)},i.stepForward=()=>{if(p<u.length){const e=u[p];l.forEach(t=>{t.stepForward&&t.stepForward(e,p)}),a.forEach(t=>{t.stepForward&&t.stepForward(e,p)}),p++}},i.destroy=()=>{l.forEach(e=>{e.destroy&&e.destroy()}),a.forEach(e=>{e.destroy&&e.destroy()})},i.sceneConfig=t,(()=>{if(_){const e=g.querySelector(".sceneObject"),n="backward"===t._presentatransdir?"to-left":"to-right";Ce(e).init(n)}})(),Promise.all(f).then(e=>{a=e,(()=>{if(t.modules)for(const e in t.modules){const n=t.modules[e],o=J[e];if(o||console.log(`Module "${e}" not found. Maybe you forgot to include it.`),o&&n){const e=new o(g,n,t);d.push(e)}}})(),Promise.all(d).then(e=>{l=e,(()=>{if(_){const e=g.querySelector(".sceneObject");Ce(e).start(),setTimeout(()=>{Ce(e).swap()},n._transitionDestroyDelay)}})(),r(i)})})})},Ee=function(e,t){e.classList.add("presenta");const n=c.div(`<div class="${de}"></div>`);n.setAttribute("tabindex","0"),c.globs(n,t),c.props(n,t),e.appendChild(n);let o=t.perPage?parseInt(t.perPage):1;o<1&&(o=1);const i=c.div(`<div class="b ${ce}"></div>`),r=c.div(`<div class="a ${_e}"></div>`);n.appendChild(i),i.appendChild(r);const s=t.scenes;var a=[];const l=(e,i)=>{const l=[];for(let a=0;a<o;++a){const o=e+a;if(o<s.length){const e=s[o];e._presentatransdir=i,e._router=d,l.push(new je(r,e,t,n))}}Promise.all(l).then(e=>{a.forEach(e=>{e.sceneConfig._presentatransdir=i,e.destroyAfter(t._transitionDestroyDelay)}),o>1&&e.forEach((e,t)=>{const n=e.sceneConfig._el,i=100/o+"%",r=100/o*t+"%";n.style.width=i,n.style.left=r}),a=e})},d=new he(n,t);if(d.on("nextIndex",e=>{l(e.currentIndex,"foreward")}),d.on("prevIndex",e=>{l(e.currentIndex,"backward")}),d.on("stepChanged",e=>{a.forEach(e=>{e.stepForward()})}),d.on("init",e=>{l(e.currentIndex,"foreward")}),window.ResizeObserver){new ResizeObserver(n=>{c.fit(r,t,e)}).observe(n)}c.fit(r,t,e),this.destroy=()=>{a.forEach(e=>{e.destroy()})},this.router=d,this.config=t},Ae={},Se=[];let Le=!1;const $e=function(e){return new Promise((t,n)=>{let o=0,i=0;0===e.length&&t(),e.forEach(e=>{var n;o++,Ae[e.url]?Le?(e.url,Se.push(t),i++):t():(Le=!0,n=e.url,setTimeout(()=>{const e=document.createElement("script");e.onerror=e=>{console.log("[Plugin error]",e),i++,i===o&&(t(),Se.forEach(e=>{e.resolve()}),Le=!1)},e.onload=e=>{console.log("[Plugin loaded]"),i++,i===o&&(t(),Se.forEach(e=>{e()}),Le=!1)},document.body.appendChild(e),e.src=n},o),Ae[e.url]=e)})})};var Be="style_group__2AqP-",Oe="style_gblock__3SGer";e(".style_group__2AqP-,.style_group__2AqP->div{width:100%;height:100%;position:relative}.style_gblock__3SGer{background:none}");const Te=function(e,t){const n=t.blocks,o=[],i=c.div(`<div class="${Be}">\n    <div class="layout"></div>\n  </div>`),r=i.querySelector(".layout");n.forEach((e,t)=>{e.index=t,o.push(new Fe(r,e)),e._el.classList.add(Oe)}),e.appendChild(i)};Te.init=()=>{};const Ie=(e,t,n)=>{Object.keys(t).forEach(o=>{const i=e[o];i&&i.init&&i.init(t[o]),n.push({plugin:i,conf:t[o],key:o})})};const qe=function(e,t){if(!e||!t)return console.log("Missing required parameters, wrapper or config.");const n=(e=>{const t=[];return e.version&&t.push({message:"Config version is different from Library version"}),e.scenes||t.push({hard:!0,message:"No `scenes` array found"}),e.scenes.forEach((e,n)=>{e.blocks||t.push({hard:!0,message:`No 'blocks' array in scene ${n} found`})}),0===e.scenes.length&&t.push({hard:!0,message:"`scenes` is empty"}),t})(t);if(n.filter(e=>e.hard).length>0)return new Promise((e,t)=>{t(n)});n.length>0&&n.forEach(e=>console.warn(e.message)),(e=>{const t={aspect:1.6,adapt:!0,mode:"present",controllers:{keyboard:!0,arrows:!0,black:!0,fullscreen:!0,hidden:!0,limitswitch:!0,cache:!0},modules:{steps:!0},plugins:[],transition:null,colorvar:null,_transitionDestroyDelay:1e3};for(const n in t)if(e.hasOwnProperty(n)){if("object"==typeof t[n])for(const o in t[n])e[n]&&!e[n].hasOwnProperty(o)&&(e[n][o]=t[n][o])}else e[n]=t[n]})(t);const o=c.select(e);t._root=o;const i=new le(o,t);return new Promise((e,n)=>{new $e(t.plugins).then(()=>{const n=(e=>{const t=[];Ie(B,e.controllers,t),Ie(J,e.modules,t);const n=[];e.scenes.forEach(e=>{e.blocks.forEach(e=>{-1===n.indexOf(e.type)&&n.push(e.type)})});const o=[];n.forEach(e=>o[e]=!0),Ie(ie,o,t);const i=[];return t.forEach(t=>{const n=t.plugin,o=t.conf;n&&n.run&&i.push(n.run(e,o))}),i})(t);Promise.all(n).then(n=>{e(new Ee(o,t)),i.destroy()})})})};return re("group",Te),qe.version="0.1.15",qe.addBlock=re,qe.addController=(e,t,n)=>{if(B[e])return console.warn(`controller io ${e} already defined`);n&&B[e]&&console.warn(`controller type ${e} was overriden`),B[e]=t},qe.addModule=(e,t,n)=>{if(!n&&J[e])return console.warn(`module type ${e} already defined`);n&&J[e]&&console.warn(`module type ${e} was overriden`),J[e]=t},qe.installed={controllers:B,modules:J,blocks:ie},qe.addGlob=c.addGlob,qe.addProp=c.addProp,qe.io=c.io,qe.use=e=>{e.install(qe)},qe}));
